<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <menuitem name="Plan de Contratacion" id="menu_plan_contratacion" parent="base.menu_main_contrato_idu"/>

        <!-- Plan de contratacion -->
        <record id="plan_contratacion_idu_list" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.plan.list</field>
            <field name="model">plan_contratacion_idu.plan</field>
            <field name="arch" type="xml">
                <tree string="Plan de contratación">
                    <field name="name"/>
                    <field name="state"/>
                    <field name="active"/>
                    <field name="item_ids"/>
                    <field name="total_pagos_presupuestado_plan"/>
                    <field name="total_pagos_programados_plan"/>
                    <field name="total_rezago_plan"/>
                </tree>
            </field>
        </record>
        <record id="plan_contratacion_idu_form" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.plan.form</field>
            <field name="model">plan_contratacion_idu.plan</field>
            <field name="arch" type="xml">
                <form string="Plan de contratación" version="7.0">
                    <sheet>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only"/>
                            <h1>
                                <field name="name"/>
                            </h1>
                        </div>
                        <group name="detalles">
                            <field name="state"/>
                            <field name="active"/>
                        </group>
                        <field name="item_ids"/>
                         <field name="currency_id" invisible="1"/>
                        <group>
                            <group class="oe_subtotal_footer oe_right" name="total_pagos_programado_item">>
                                <field name="total_pagos_presupuestado_plan" widget="monetary" options="{'currency_field': 'currency_id'}" readonly="1"/>
                                <label for="total_pagos_programados_plan"/>
                                    <div>
                                        <field name="total_pagos_programados_plan" widget="monetary" options="{'currency_field': 'currency_id'}" readonly="1" string="Rezago"/>
                                    </div>
                                <field name="total_rezago_plan" widget='monetary' options="{'currency_field': 'currency_id'}" class="oe_subtotal_footer_separator"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="plan_contratacion_idu_action" model="ir.actions.act_window">
            <field name="name">Plan Contratación</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">plan_contratacion_idu.plan</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="plan_contratacion_idu_list"/>
        </record>
        <menuitem
            action="plan_contratacion_idu_action"
            id="menu_plan_contratacion_plan_list"
            parent="menu_plan_contratacion"
            sequence="0"/>

        <!-- Item Plan de contratacion -->
        <record id="plan_contratacion_idu_item_list" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.item.list</field>
            <field name="model">plan_contratacion_idu.item</field>
            <field name="arch" type="xml">
                <tree string="Item Plan de contratación">
                    <field name="clasificacion_id"/>
                    <field name="state"/>
                    <field name="dependencia"/>
                    <field name="fuente"/>
                    <field name="plazo_de_ejecucion"/>
                    <field name="fecha_radicacion"/>
                    <field name="fecha_crp"/>
                    <field name="fecha_acta_inicio"/>
                    <field name="presupuesto"/>
                </tree>
            </field>
        </record>
        <record id="plan_contratacion_idu_item_form" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.item.form</field>
            <field name="model">plan_contratacion_idu.item</field>
            <field name="arch" type="xml">
                <form string="Item plan de contratación" version="7.0">
                    <header>
                       <field name="state" widget="statusbar" colors="blue:state" clickabe= 'True'/>
                    </header>
                    <group col="1" colspan="1">
                        <header>
                           <button name="wkf_draft" string="Borrador" type="object" icon="gtk-ok" states="estudios_previos"/>
                           <button name="wkf_estudios_previos" string="Estudios Previos" type="object" icon="gtk-ok" states="draft,suscrito,radicado,no_realizado"/>
                           <button name="wkf_radicado" string="Radicar" type="object" icon="gtk-ok" states="estudios_previos"/>
                           <button name="wkf_suscrito" string="Contrato Suscrito" type="object" icon="gtk-ok" states="radicado, estudios_previos"/>
                           <button name="wkf_ejecucion" string="Iniciar ejecución" type="object" icon="gtk-ok" states="suscrito"/>
                           <button name="wkf_ejecutado" string="Finalizar Ejecución" type="object" icon="gtk-ok" states="ejecucion"/>
                           <button name="wkf_no_realizado" string="No Realizado" icon="gtk-cancel" type="object" states="estudios_previos"/>
                        </header>
                    </group>
                    <sheet>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only"/>
                            <h1>
                                <field name="name" invisible="1"/>
                            </h1>
                        </div>
                        <group>
                            <field name="clasificacion_id"/>
                        </group>
                        <group col="3" colspan="1">
                            <field name="centro_costo"/>
                            <button name="consultar_nombre_proyecto_idu" string="Consultar" type="object" icon="gtk-ok"/>
                        </group>
                        <group>
                            <field name="nombre_proyecto_idu"/>
                            <field name="nombre_punto_inversion"/>
                            <field name="dependencia"/>
                            <field name="fuente"/>
                            <field name="tipo_proceso"/>
                            <field name="tipo_proceso_seleccion"/>
                            <field name="currency_id" invisible="1"/>
                            <field name="presupuesto" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                        </group>
                        <notebook colspan="6">
                            <page string="Detalles">
                                <group name="detalles">
                                    <field name="description"/>
                                    <field name="plazo_de_ejecucion"/>
                                    <field name="unidad_meta_fisica"/>
                                    <field name="cantidad_meta_fisica"/>
                                </group>
                            </page>
                            <page string="Planificación de Fechas">
                                <group name="fechas" string="Fechas Planificadas">
                                    <separator colspan="2"/>
                                    <field name="fecha_radicacion"/>
                                    <field name="fecha_crp"/>
                                    <field name="fecha_acta_inicio"/>
                                 </group>
                            </page>
                            <page string="Planificación de Pagos">
                                <field name="plan_pagos_item_ids" on_change="onchange_plan_pagos_item_ids(plan_pagos_item_ids)" nolabel="1">
                                    <tree string="Plan de pagos" editable="bottom">
                                        <field name="mes"/>
                                        <field name="valor" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                    </tree>
                                </field>
                                <group>
                                     <group class="oe_subtotal_footer oe_right" name="total_pagos_programado_item">>
                                         <field name="total_pagos_programados" widget="monetary" options="{'currency_field': 'currency_id'}" readonly="1"/>
                                         <label for="presupuesto_rezago"/>
                                            <div>
                                                <field name="presupuesto_rezago" string="Rezago" widget="monetary" options="{'currency_field': 'currency_id'}" readonly="1"/>
                                            </div>
                                            <field name="total_programado_rezago" widget="monetary" options="{'currency_field': 'currency_id'}" class="oe_subtotal_footer_separator"/>
                                     </group>
                               </group>
                            </page>
                            <page string="Información de Verificación">
                                <group name="informacion_verificacion">
                                    <field name="numero_orfeo"/>
                                    <field name="numero_crp"/>
                                    <field name="numero_contrato"/>
                                    <field name="acta_inicio"/>
                                    <field name="acta_liquidacion"/>
                                </group>
                            </page>
                            <page string="Pagos Realizados">
                                <group col="2" colspan="1" name="pagos">
                                    <separator colspan="2"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                       <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                       <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>
        <record id="plan_contratacion_idu_item_action" model="ir.actions.act_window">
            <field name="name">Item Plan Contratación</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">plan_contratacion_idu.item</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="plan_contratacion_idu_item_list"/>
        </record>
        <menuitem
            action="plan_contratacion_idu_item_action"
            id="menu_plan_contratacion_item_list"
            parent="menu_plan_contratacion"/>

<!-- notify all employees of module installation -->
         <record model="mail.message" id="module_install_notification">
            <field name="model">mail.group</field>
            <field name="res_id" ref="mail.group_all_employees"/>
            <field name="type">notification</field>
            <field name="subtype_id" ref="mail.mt_comment"/>
            <field name="subject">Project Management application installed!</field>
            <field name="body"><![CDATA[<p>Manage multi-level projects and tasks.  You can delegate tasks, track task work, and review your planning.</p>
            <p>You can manage todo lists on tasks by installing the <i>Todo Lists</i> application, supporting the Getting Things Done (GTD) methodology.</p>
            <p>You can also manage issues/bugs in projects by installing the "Issue Tracker" application.</p>]]></field>
        </record>

        <!-- Clasificador de Proyectos -->
        <record id="plan_contratacion_idu_clasificador_proyectos_search" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.clasificador_proyectos.search</field>
            <field name="model">plan_contratacion_idu.clasificador_proyectos</field>
            <field name="arch" type="xml">
               <search string="Clasificador Proyectos">
                    <field name="name"/>
                    <separator/>
                    <filter name="activo" string="Activo" domain="[('active','=',True)]" icon="terp-check"/>
                    <filter name="inactivo" string="Inactivo" domain="[('active','=',False)]" icon="terp-check"/>
                </search>
            </field>
        </record>
        <record id="plan_contratacion_idu_clasificador_proyectos_tree" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.clasificador_proyectos.tree</field>
            <field name="model">plan_contratacion_idu.clasificador_proyectos</field>
            <field name="field_parent">child_ids</field>
            <field name="search_view_id" ref="plan_contratacion_idu_clasificador_proyectos_search"/>
            <field name="arch" type="xml">
                <tree string="Clasificación de Proyectos">
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record id="plan_contratacion_idu_clasificador_proyectos_list" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.clasificador_proyectos.list</field>
            <field name="model">plan_contratacion_idu.clasificador_proyectos</field>
            <field name="search_view_id" ref="plan_contratacion_idu_clasificador_proyectos_search"/>
            <field name="arch" type="xml">
                <tree string="Clasificación de Proyectos">
                    <field name="sequence" widget="handle"/>
                    <field name="complete_name"/>
                    <field name="codigo"/>
                    <field name="name"/>
                    <field name="tipo"/>
                </tree>
            </field>
        </record>
        <record id="plan_contratacion_idu_clasificador_proyectos_form" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.clasificador_proyectos.form</field>
            <field name="model">plan_contratacion_idu.clasificador_proyectos</field>
            <field name="arch" type="xml">
            <form string="Clasificación de Proyectos" version="7.0">
                <sheet string="Clasificación">
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1>
                            <field name="tipo"/>
                        </h1>
                    </div>
                    <group name="detalles">
                        <field name="codigo"/>
                        <field name="name"/>
                        <field name="parent_id" />
                        <field name="child_ids" />
                    </group>
                </sheet>
            </form>
            </field>
        </record>
        <record id="plan_contratacion_idu_clasificador_proyectos_tree_action" model="ir.actions.act_window">
            <field name="name">plan_contratacion_idu.clasificador_proyectos.tree</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">plan_contratacion_idu.clasificador_proyectos</field>
            <field name="domain">[('parent_id','=',False)]</field>
            <field name="view_type">tree</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="plan_contratacion_idu_clasificador_proyectos_tree"/>
        </record>
        <menuitem
            action="plan_contratacion_idu_clasificador_proyectos_tree_action"
            id="plan_contratacion_idu_clasificador_proyectos_tree_menu"
            parent="menu_plan_contratacion"
            name="Clasificación de Proyectos"
            sequence="0" />
        <record id="plan_contratacion_idu_clasificador_proyectos_action" model="ir.actions.act_window">
            <field name="name">Deliverables</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">plan_contratacion_idu.clasificador_proyectos</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,gantt,calendar,kanban</field>
            <field name="domain">['|',('id','=',active_id),('id','child_of',active_id)]</field>
            <field name="view_id" ref="plan_contratacion_idu_clasificador_proyectos_list"/>
        </record>
        <record id="ir_deliverable_tree_open" model="ir.values">
            <field eval="'tree_but_open'" name="key2"/>
            <field eval="'plan_contratacion_idu.clasificador_proyectos'" name="model"/>
            <field name="name">Clasificador Proyectos</field>
            <field eval="'ir.actions.act_window,%d'%plan_contratacion_idu_clasificador_proyectos_action" name="value"/>
        </record>
        <record id="plan_contratacion_idu_clasificador_proyectos_list_action" model="ir.actions.act_window">
            <field name="name">Deliverables</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">plan_contratacion_idu.clasificador_proyectos</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="plan_contratacion_idu_clasificador_proyectos_list"/>
        </record>

        <!-- Fuente de Financiacion -->
        <record id="plan_contratacion_idu_fuente_list" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.fuente.list</field>
            <field name="model">plan_contratacion_idu.fuente</field>
            <field name="arch" type="xml">
                <tree string="Fuente de Financiación">
                    <field name="name"/>
                    <field name="codigo_fuente"/>
                    <field name="codigo_fuente_sdh"/>
                    <field name="nombre_fuente_sdh"/>
                    <field name="codigo_detalle_fuente_sdh"/>
                    <field name="nombre_detalle_fuente_sdh"/>
                </tree>
            </field>
        </record>
        <record id="plan_contratacion_idu_fuente_form" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.fuente.form</field>
            <field name="model">plan_contratacion_idu.fuente</field>
            <field name="arch" type="xml">
                <form string="Fuente de Financiación" version="7.0">
                    <sheet>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only"/>
                            <h1>
                                <field name="name"/>
                            </h1>
                        </div>
                        <group name="detalles">
                            <field name="codigo_fuente"/>
                            <field name="codigo_fuente_sdh"/>
                            <field name="nombre_fuente_sdh"/>
                            <field name="codigo_detalle_fuente_sdh"/>
                            <field name="nombre_detalle_fuente_sdh"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="plan_contratacion_idu_fuente_action" model="ir.actions.act_window">
            <field name="name">Fuente de Financiación</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">plan_contratacion_idu.fuente</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="plan_contratacion_idu_fuente_list"/>
        </record>
        <menuitem
            action="plan_contratacion_idu_fuente_action"
            id="menu_plan_contratacion_plan_fuente_list"
            parent="menu_plan_contratacion"
            sequence="0"/>

        <!-- Programacion de Pagos -->
        <record id="plan_contratacion_idu_plan_pagos_item_list" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.plan_pagos_item.list</field>
            <field name="model">plan_contratacion_idu.plan_pagos_item</field>
            <field name="arch" type="xml" >
                <tree string="Planificación de Pagos">
                     <field name="currency_id" invisible="1"/>
                    <field name="mes"/>
                    <field name="valor" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                </tree>
            </field>
        </record>
        <record id="plan_contratacion_idu_plan_pagos_item_form" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.plan_pagos_item.form</field>
            <field name="model">plan_contratacion_idu.plan_pagos_item</field>
            <field name="arch" type="xml">
                <form string="Planificación de Pagos" version="7.0">
                    <sheet>
                        <field name="currency_id" invisible="1"/>
                        <field name="mes"/>
                        <field name="valor" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="plan_contratacion_idu_plan_pagos_item_action" model="ir.actions.act_window">
            <field name="name">Planificación de Pagos</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">plan_contratacion_idu.plan_pagos_item</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="plan_contratacion_idu_plan_pagos_item_list"/>
        </record>
        <menuitem
            action="plan_contratacion_idu_plan_pagos_item_action"
            id="menu_plan_contratacion_idu_plan_pagos_item_list"
            parent="menu_plan_contratacion"
            sequence="0"/>

        <!-- Tipo de Proceso -->
        <record id="plan_contratacion_idu_plan_tipo_proceso_list" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.plan_tipo_proceso.list</field>
            <field name="model">plan_contratacion_idu.plan_tipo_proceso</field>
            <field name="arch" type="xml" >
                <tree string="Tipo Proceso">
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record id="plan_contratacion_idu_plan_tipo_proceso_form" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.plan_tipo_proceso.form</field>
            <field name="model">plan_contratacion_idu.plan_tipo_proceso</field>
            <field name="arch" type="xml">
                <form string="Proceso" version="7.0">
                    <sheet>
                        <field name="name"/>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="plan_contratacion_idu_tipo_proceso_item_action" model="ir.actions.act_window">
            <field name="name">Tipo Proceso del item</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">plan_contratacion_idu.plan_tipo_proceso</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="plan_contratacion_idu_plan_tipo_proceso_list"/>
        </record>
        <menuitem
            action="plan_contratacion_idu_tipo_proceso_item_action"
            id="menu_plan_contratacion_idu_plan_tipo_proceso_list"
            parent="menu_plan_contratacion"
            sequence="0"/>

        <!-- Tipo Proceso de Seleccion-->
        <record id="plan_contratacion_idu_plan_tipo_proceso_seleccion_list" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.plan_tipo_proceso_seleccion.list</field>
            <field name="model">plan_contratacion_idu.plan_tipo_proceso_seleccion</field>
            <field name="arch" type="xml" >
                <tree string="Tipo Proceso de Selección">
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record id="plan_contratacion_idu_plan_tipo_proceso_seleccion_form" model="ir.ui.view">
            <field name="name">plan_contratacion_idu.plan_tipo_proceso_seleccion.form</field>
            <field name="model">plan_contratacion_idu.plan_tipo_proceso_seleccion</field>
            <field name="arch" type="xml">
                <form string="Procesi" version="7.0">
                    <sheet>
                        <field name="name"/>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="plan_contratacion_idu_plan_tipo_proceso_seleccion_action" model="ir.actions.act_window">
            <field name="name">Tipo de Proceso de Seleccion</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">plan_contratacion_idu.plan_tipo_proceso_seleccion</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="plan_contratacion_idu_plan_tipo_proceso_seleccion_list"/>
        </record>
        <menuitem
            action="plan_contratacion_idu_plan_tipo_proceso_seleccion_action"
            id="menu_plan_contratacion_idu_plan_tipo_proceso_seleccion_list"
            parent="menu_plan_contratacion"
            sequence="0"/>

         <!--  Acceso Menus -->
<!--           <record model="ir.ui.menu" id="menu_plan_contratacion_idu_plan_tipo_proceso_seleccion_list">
                <field eval="[(4, ref('group_plan_contratacion_idu_user'))]" name="groups_id"/>
         </record> -->
    </data>
</openerp>
